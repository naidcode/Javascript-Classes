<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>To-Do-List</title>
  </head>
  <body>
    <h2 id="clockDisplay" onclick="updateClock()"></h2>
    <br /><br />
    <label for="">Task Enter</label>
    <input type="text" placeholder="Enter Task" id="enterName" /> <br /><br />
    <button id="addButton" onclick="addItem()">Add Task</button> <br /><br />
    <ul id="displayTask"></ul>
    <br /><br />
    <p id="message"></p>
  </body>
  <script>
    let Task = JSON.parse(localStorage.getItem("task")) || [];
    renderTask();
     document.body.addEventListener("keydown" , async (event) => {
        if(event.key === "Enter") {
          addItem();
        }
      })
    function addItem() {
      let enterName = document.getElementById("enterName").value.trim();

      if (!enterName) {
        alert(`First enter task`);
        return;
      }

      let task = {
        text: enterName,
      };

      Task.push(task);
      updateStorage();
      renderTask();
      document.getElementById("enterName").value = "";
      message(" Task Added!", "green");

     
    }

    function renderTask() {
      let ul = document.getElementById("displayTask");
      ul.innerHTML = "";
      Task.forEach((task, index) => {
        let li = document.createElement("li");
        li.textContent = `${task.text}`;

        let DleButton = document.createElement("button");
        DleButton.textContent = "Delete";
        DleButton.onclick = function () {
          deleteTask(index);
        };

        ul.appendChild(li);
        li.appendChild(DleButton);
      });
    }

    function message(text, color) {
      let message = document.getElementById("message");
      message.textContent = text;
      message.style.color = color;

      setTimeout(() => {
        message.textContent = "";
      }, 3000);
    }

    function deleteTask(index) {
      Task.splice(index, 1);
      updateStorage();
      renderTask();
      message("Deleted task!", "red");
    }

    function updateStorage() {
      localStorage.setItem("task", JSON.stringify(Task));
    }
  </script>
</html>
