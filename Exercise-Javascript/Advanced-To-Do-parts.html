<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Todo App - Phase 1</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Segoe UI', sans-serif;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      min-height: 100vh;
      padding: 20px;
    }

    .container {
      max-width: 1200px;
      margin: 0 auto;
    }

    header {
      text-align: center;
      color: white;
      margin-bottom: 30px;
    }

    header h1 {
      font-size: 2.5rem;
    }

    .main-grid {
      display: grid;
      grid-template-columns: 300px 1fr;
      gap: 20px;
    }

    .sidebar {
      background: white;
      border-radius: 15px;
      padding: 20px;
      box-shadow: 0 10px 30px rgba(0,0,0,0.2);
    }

    .sidebar h2 {
      color: #667eea;
      margin-bottom: 15px;
    }

    .main-content {
      background: white;
      border-radius: 15px;
      padding: 30px;
      box-shadow: 0 10px 30px rgba(0,0,0,0.2);
    }

    .color-picker {
  display: flex;
  gap: 8px;
  margin-bottom: 10px;
  flex-wrap: wrap;
}

.color-option {
  width: 35px;
  height: 35px;
  border-radius: 50%;
  cursor: pointer;
  border: 3px solid transparent;
  transition: transform 0.2s;
}

.color-option:hover {
  transform: scale(1.1);
}

.color-option.selected {
  border-color: #333;
  transform: scale(1.15);
}

.category-item {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 10px;
  margin-bottom: 8px;
  background: #f5f5f5;
  border-radius: 8px;
}

.category-item button {
  background: #ff6b6b;
  color: white;
  border: none;
  padding: 5px 10px;
  border-radius: 5px;
  cursor: pointer;
}

.categoryForm input {
  width: 100%;
  padding: 10px;
  border: 2px solid #e0e0e0;
  border-radius: 8px;
  margin-bottom: 10px;
  font-size: 0.95rem;
}

.categoryForm button {
  width: 100%;
  padding: 10px;
  background: #667eea;
  color: white;
  border: none;
  border-radius: 8px;
  cursor: pointer;
  font-weight: 600;
  transition: all 0.3s;
}

.categoryForm button:hover {
  background: #5568d3;
  transform: translateY(-2px);
}
    
  </style>
</head>
<body>
  <div class="container">
    <header>
      <h1>ðŸ“‹ Todo App - Phase 1</h1>
      <p>Building Categories</p>
    </header>

    <div class="main-grid">
      <!-- SIDEBAR -->
      <aside class="sidebar">
        <h2>Categories</h2>
        <div class="categoryForm">
        <input type="text" id="categoryInput" placeholder="Enter Category Name" maxlength="20">
        <div id="colorPicker" class="color-picker"></div>
        <button id="addcategory">addcategory</button>
        </div>
        <div id="categoryList"></div>
      </aside>

      <!-- MAIN CONTENT -->
      <main class="main-content">
        <h2>Add New Todo</h2>
        <div class="todo-form">
          <input type="text" id="todoInput" placeholder="enter todo here" maxlength="100">
          <select id="select-option">
            <option>add category</option>
          </select>
          <button id="addTodo">Add To-Do</button>
        </div>
        <div id="taskList"></div>
      </main>
    </div>
  </div>

  <script>
    class Todo{
      constructor(text , categoryId) {
        this.id = Date.now() + Math.random(),
        this.text = text,
        this.completed = false,
        this.categoryId = categoryId,
        this.createAt = Date.now()
      }
    }

    class Category {
  constructor(name, color) {
 this.id = Date.now() + Math.random(),
 this.name = name,
 this.color = color
  }
}

// // Test it:
// const testCat = new Category('Work', '#667eea');
// console.log(testCat); // Should show: Category { id: ..., name: 'Work', color: '#667eea' }

class TodoManager {
  constructor() {
    this.todos = [];
    this.categories = [];
  }

  addCategory(name, color) {
    let category = new Category(name , color)
    this.categories.push(category)
    return category
  }

  deleteCategory(id) {
    this.categories = this.categories.filter(c => c.id !== id);
    this.todos = this.todos.filter(t => t.categoryId !== id)
  }

  getCategories() {
    return [...this.categories];
  }

  AddTodo(text , categoryId){
    let todo = new Todo(text , categoryId)
    this.todos.push(todo)
    return todo;
  }

  DeleteTdo(id){
  this.todos = this.todos.filter(t => t.id !== id)
  }

  toggleTodo(id){
    let toggle = this.todos.find(f => f.id === id )
    if(toggle){
      toggle.completed = !toggle.completed
    }
  }

  getTodo(){
    return [...this.todos]
  }
}

// // Test it:
// const manager = new TodoManager();
// manager.addCategory('Personal', '#667eea');
// manager.addCategory('Work', '#f093fb');
// console.log(manager.getCategories()); // Should show 2 categories

class UIRenderer {
  constructor(manager) {
    this.manager = manager;
    this.colors = ['#667eea', '#f093fb', '#4facfe', '#43e97b', '#fa709a', '#fee140', '#30cfd0'];
    this.selectedColor = this.colors[0];
  }

  renderColorPicker() {
    const picker = document.getElementById('colorPicker');
    
  picker.innerHTML = this.colors.map(color => `
  <div class="color-option ${color === this.selectedColor ? "selected" : ''}" style='background: ${color}' data-color="${color}"></div>
  `).join('')
  }

  renderCategories() {
    const list = document.getElementById('categoryList');
    
    // TODO: Get categories from this.manager
    const categories = this.manager.getCategories();
    if(categories.length === 0){
      list.innerHTML = `<p style="color: grey" style="font-size:12px">categories not yet</p>`;
      return
    }
   list.innerHTML = categories.map(cat => `
  <div class="category-item">
    <span>${cat.name}</span>
    <button data-id="${cat.id}">Delete</button>
    </div>
   `
  ).join('')
  }

  renderAll() {
    // TODO: Call both render methods
    this.renderColorPicker();
    this.renderCategories();
  }
}

class App {
  constructor() {
    // TODO: Create manager instance
    this.manager = new TodoManager();
    
    // TODO: Create renderer instance (pass manager to it)
    this.renderer = new UIRenderer(this.manager);
    
    // TODO: Call init method
    this.init();
  }

  init() {
    // TODO: Add 3 default categories
    this.manager.addCategory('Personal', '#667eea');
    this.manager.addCategory('Work', '#f093fb');
    this.manager.addCategory('Shopping', '#4facfe');
    
    // TODO: Render everything
    this.renderer.renderAll();
    
  this.setupeventlistener()
  }

  setupeventlistener(){
    document.getElementById("colorPicker").addEventListener("click" , (e)=> {
      if(e.target.classList.contains("color-option")){
      this.renderer.selectedColor = e.target.dataset.color;

      this.renderer.renderColorPicker();
      }
    })

    document.getElementById("addcategory").addEventListener("click" , () => {
      let input = document.getElementById("categoryInput")
      let name = input.value.trim();

      if(name){
        this.manager.addCategory(name , this.renderer.selectedColor)

        input.value = ""
        this.renderer.renderCategories()

      } else{
        alert("please enter category name")
      }
    })

    document.getElementById("categoryList").addEventListener("click" ,(e)=>{
      if(e.target.tagName === "BUTTON"){
        let id = parseFloat(e.target.dataset.id);

        if(confirm("delete this category")){
          this.manager.deleteCategory(id)

          this.renderer.renderCategories()
        }
      }
    })
  }
}

// START THE APP!
const app = new App();
    
  </script>
</body>
</html>